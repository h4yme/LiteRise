<?xml version="1.0" encoding="utf-8"?>

<FrameLayout



    xmlns:android="http://schemas.android.com/apk/res/android"



    xmlns:app="http://schemas.android.com/apk/res-auto"



    xmlns:tools="http://schemas.android.com/tools"



    android:layout_width="match_parent"



    android:layout_height="match_parent"



    tools:context=".activities.PreAssessmentActivity">



    <!-- Background Image -->



    <ImageView



        android:layout_width="match_parent"



        android:layout_height="match_parent"



        android:src="@drawable/bg_placement"



        android:scaleType="centerCrop"



        android:contentDescription="Placement Test Background" />



    <ScrollView



        android:layout_width="match_parent"



        android:layout_height="match_parent"



        android:fillViewport="true">



    <LinearLayout

        android:layout_width="match_parent"

        android:layout_height="wrap_content"

        android:orientation="vertical"

        android:padding="16dp">



        <!-- Header Section -->

        <LinearLayout

            android:layout_width="match_parent"

            android:layout_height="wrap_content"

            android:orientation="horizontal"

            android:gravity="center_vertical"

            android:layout_marginBottom="16dp">



            <LinearLayout

                android:layout_width="0dp"

                android:layout_height="wrap_content"

                android:layout_weight="1"

                android:orientation="vertical">



                <TextView

                    android:id="@+id/tvTitle"

                    android:layout_width="wrap_content"

                    android:layout_height="wrap_content"

                    android:text="Placement Test"

                    android:textSize="24sp"

                    android:textStyle="bold"

                    android:textColor="@android:color/white"



                    android:fontFamily="sans-serif-medium"/>







                <TextView



                    android:id="@+id/tvProgress"



                    android:layout_width="wrap_content"



                    android:layout_height="wrap_content"



                    android:text="1/7 Questions"



                    android:textColor="@android:color/white"



                    android:alpha="0.9"

                    android:textSize="14sp"

                    android:layout_marginTop="4dp"/>

            </LinearLayout>



            <!-- Item Type Badge -->

            <TextView

                android:id="@+id/tvItemTypeBadge"

                android:layout_width="wrap_content"

                android:layout_height="wrap_content"

                android:text="Grammar"

                android:textColor="@color/white"

                android:textSize="12sp"

                android:textStyle="bold"

                android:background="@drawable/badge_background"

                android:paddingHorizontal="12dp"

                android:paddingVertical="6dp"

                android:layout_marginStart="8dp"/>

        </LinearLayout>



        <!-- Progress Bar -->

        <ProgressBar

            android:id="@+id/progressBar"

            style="?android:attr/progressBarStyleHorizontal"

            android:layout_width="match_parent"

            android:layout_height="8dp"

            android:max="100"

            android:progress="15"

            android:progressTint="@color/color_jade1"

            android:backgroundTint="#E0E0E0"

            android:layout_marginBottom="20dp"/>



        <!-- Passage Card (shown when needed) -->

        <androidx.cardview.widget.CardView

            android:id="@+id/cardPassage"

            android:layout_width="match_parent"

            android:layout_height="wrap_content"

            app:cardCornerRadius="16dp"

            app:cardElevation="2dp"

            android:layout_marginBottom="16dp"

            app:cardBackgroundColor="@color/white"

            android:visibility="gone">



            <LinearLayout

                android:layout_width="match_parent"

                android:layout_height="wrap_content"

                android:orientation="vertical"

                android:padding="20dp">



                <TextView

                    android:id="@+id/tvPassage"

                    android:layout_width="match_parent"

                    android:layout_height="wrap_content"

                    android:text="Read the following passage aloud:"


                    android:textColor="@color/text_primary"

                    android:textSize="15sp"

                    android:textStyle="bold"

                    android:fontFamily="sans-serif-medium"/>



                <TextView

                    android:id="@+id/tvPassageText"

                    android:layout_width="match_parent"

                    android:layout_height="wrap_content"

                    android:layout_marginTop="8dp"

                    android:text=""

                    android:textColor="@color/text_primary"

                    android:textSize="15sp"

                    android:lineSpacingExtra="4dp"/>

            </LinearLayout>

        </androidx.cardview.widget.CardView>



        <!-- Pronunciation Card (for Pronunciation type items) -->

        <androidx.cardview.widget.CardView

            android:id="@+id/cardPronunciation"

            android:layout_width="match_parent"

            android:layout_height="wrap_content"

            app:cardCornerRadius="16dp"

            app:cardElevation="2dp"

            android:layout_marginBottom="16dp"

            app:cardBackgroundColor="@color/white"

            android:visibility="gone">



            <LinearLayout

                android:layout_width="match_parent"

                android:layout_height="wrap_content"

                android:orientation="vertical"

                android:padding="24dp"

                android:gravity="center">



                <TextView

                    android:layout_width="wrap_content"

                    android:layout_height="wrap_content"

                    android:text="Pronounce this word:"

                    android:textColor="@color/text_secondary"

                    android:textSize="14sp"/>



                <TextView

                    android:id="@+id/tvPronunciationWord"

                    android:layout_width="wrap_content"

                    android:layout_height="wrap_content"

                    android:layout_marginTop="8dp"

                    android:text="education"

                    android:textColor="@color/text_primary"

                    android:textSize="32sp"

                    android:textStyle="bold"

                    android:fontFamily="sans-serif-medium"/>



                <TextView

                    android:id="@+id/tvPronunciationGuide"

                    android:layout_width="wrap_content"

                    android:layout_height="wrap_content"

                    android:layout_marginTop="4dp"

                    android:text="/ed-ju-kei-shun/"

                    android:textColor="@color/color_jade1"

                    android:textSize="16sp"

                    android:fontFamily="sans-serif-light"/>



                <!-- Mic Button -->

                <LinearLayout

                    android:layout_width="wrap_content"

                    android:layout_height="wrap_content"

                    android:orientation="vertical"

                    android:gravity="center"

                    android:layout_marginTop="24dp">



                    <androidx.cardview.widget.CardView

                        android:id="@+id/cardMicButton"

                        android:layout_width="80dp"

                        android:layout_height="80dp"

                        app:cardCornerRadius="40dp"

                        app:cardElevation="4dp"

                        app:cardBackgroundColor="@color/color_jade1">



                        <ImageView

                            android:id="@+id/ivMic"

                            android:layout_width="40dp"

                            android:layout_height="40dp"

                            android:src="@drawable/ic_mic"

                            android:layout_gravity="center"

                            app:tint="@color/white"

                            android:contentDescription="Record pronunciation"/>

                    </androidx.cardview.widget.CardView>



                    <TextView

                        android:id="@+id/tvMicStatus"

                        android:layout_width="wrap_content"

                        android:layout_height="wrap_content"

                        android:text="Tap to record"

                        android:textColor="@color/text_secondary"

                        android:textSize="14sp"

                        android:layout_marginTop="8dp"/>

                </LinearLayout>

            </LinearLayout>

        </androidx.cardview.widget.CardView>



        <!-- Question Card -->

        <androidx.cardview.widget.CardView

            android:id="@+id/cardQuestion"

            android:layout_width="match_parent"

            android:layout_height="wrap_content"

            app:cardCornerRadius="16dp"

            app:cardElevation="2dp"

            android:layout_marginBottom="16dp"

            app:cardBackgroundColor="@color/white">



            <LinearLayout

                android:layout_width="match_parent"

                android:layout_height="wrap_content"

                android:orientation="vertical"

                android:padding="20dp">



                <TextView

                    android:id="@+id/tvQuestion"

                    android:layout_width="match_parent"

                    android:layout_height="wrap_content"

                    android:text="What is the main idea of the passage?"

                    android:textColor="@color/text_primary"

                    android:textSize="18sp"

                    android:textStyle="bold"

                    android:fontFamily="sans-serif-medium"

                    android:lineSpacingExtra="4dp"/>



                <!-- Scrambled Words Container (for Syntax type) -->

                <LinearLayout

                    android:id="@+id/containerScrambledWords"

                    android:layout_width="match_parent"

                    android:layout_height="wrap_content"

                    android:orientation="vertical"

                    android:layout_marginTop="16dp"

                    android:visibility="gone">



                    <TextView

                        android:layout_width="wrap_content"

                        android:layout_height="wrap_content"

                        android:text="Tap the words in correct order:"

                        android:textColor="@color/text_secondary"

                        android:textSize="14sp"

                        android:layout_marginBottom="12dp"/>



                    <!-- Word chips will be added programmatically here -->

                    <com.google.android.flexbox.FlexboxLayout

                        android:id="@+id/flexboxScrambledWords"

                        android:layout_width="match_parent"

                        android:layout_height="wrap_content"

                        app:flexWrap="wrap"

                        app:alignItems="flex_start"

                        app:alignContent="flex_start"/>

                </LinearLayout>



                <!-- Multiple Choice Options Grid -->

                <GridLayout

                    android:id="@+id/gridOptions"

                    android:layout_width="match_parent"

                    android:layout_height="wrap_content"

                    android:columnCount="1"

                    android:layout_marginTop="16dp"

                    android:rowCount="4">



                    <androidx.appcompat.widget.AppCompatButton

                        android:id="@+id/btnOptionA"

                        style="@style/OptionButtonStyleNew"

                        android:text="a) Lorem ipsum dolor sit amet"/>



                    <androidx.appcompat.widget.AppCompatButton

                        android:id="@+id/btnOptionB"

                        style="@style/OptionButtonStyleNew"

                        android:text="b) Lorem ipsum dolor sit amet"/>



                    <androidx.appcompat.widget.AppCompatButton

                        android:id="@+id/btnOptionC"

                        style="@style/OptionButtonStyleNew"

                        android:text="c) Lorem ipsum dolor sit amet"/>



                    <androidx.appcompat.widget.AppCompatButton

                        android:id="@+id/btnOptionD"

                        style="@style/OptionButtonStyleNew"

                        android:text="d) Lorem ipsum dolor sit amet"/>

                </GridLayout>

            </LinearLayout>

        </androidx.cardview.widget.CardView>



        <!-- Continue Button -->

        <com.google.android.material.button.MaterialButton

            android:id="@+id/btnContinue"

            android:layout_width="match_parent"

            android:layout_height="56dp"

            android:text="Continue"

            android:textSize="16sp"

            android:textStyle="bold"

            app:cornerRadius="28dp"

            app:backgroundTint="@color/color_jade1"

            android:textColor="@color/white"

            android:enabled="false"

            android:layout_marginTop="8dp"

            android:layout_marginBottom="16dp"/>



    </LinearLayout>

</ScrollView>
    <!-- Tutorial Overlay (semi-transparent, shown only for first question) -->
    <View
        android:id="@+id/overlayDark"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#CC000000"
        android:clickable="false"
        android:focusable="false"
        android:visibility="gone" />

    <!-- Tutorial Content -->
    <RelativeLayout
        android:id="@+id/tutorialContentLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="24dp"
        android:clickable="false"
        android:focusable="false"
        android:visibility="gone">

        <!-- Leo Mascot (bottom right) -->
        <ImageView
            android:id="@+id/ivLeoMascot"
            android:layout_width="180dp"
            android:layout_height="180dp"
            android:layout_alignParentBottom="true"
            android:layout_alignParentEnd="true"
            android:layout_marginBottom="80dp"
            android:layout_marginEnd="16dp"
            android:src="@drawable/leo_placement_test"
            android:scaleType="fitCenter"
            android:contentDescription="Leo Mascot" />

        <!-- Speech Bubble (centered above Leo) -->
        <androidx.cardview.widget.CardView
            android:id="@+id/cardSpeechBubble"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_above="@id/ivLeoMascot"
            android:layout_marginBottom="0dp"
            android:layout_marginStart="24dp"
            android:layout_marginEnd="24dp"
            app:cardBackgroundColor="@android:color/white"
            app:cardCornerRadius="20dp"
            app:cardElevation="8dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="20dp">

                <!-- Tutorial Title -->
                <TextView
                    android:id="@+id/tvTutorialTitle"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Welcome! ðŸ¦"
                    android:textSize="18sp"
                    android:textStyle="bold"
                    android:textColor="#2D3436"
                    android:gravity="center"
                    android:layout_marginBottom="8dp" />

                <!-- Tutorial Message -->
                <TextView
                    android:id="@+id/tvTutorialMessage"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Hi! I'm Leo! Let me guide you through this!"
                    android:textSize="15sp"
                    android:textColor="#2D3436"
                    android:lineSpacingExtra="4dp"
                    android:gravity="center" />

            </LinearLayout>

        </androidx.cardview.widget.CardView>

        <!-- Tap to Continue (bottom) -->
        <TextView
            android:id="@+id/tvTapToContinue"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="24dp"
            android:text="Try It Yourself!"
            android:textSize="16sp"
            android:textColor="@android:color/white"
            android:textStyle="bold"
            android:padding="12dp" />

    </RelativeLayout>
</FrameLayout>